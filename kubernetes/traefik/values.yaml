ports:
  web:
    port: 80
    nodePort: 30000
    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true

  websecure:
    asDefault: true
    port: 443
    nodePort: 30001
    tls:
      certResolver: letsencrypt

ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`traefik.derviloper.de`)
    entryPoints:
      - websecure
    middlewares:
      - name: dashboard-auth

extraObjects:
  - apiVersion: bitnami.com/v1alpha1
    kind: SealedSecret
    metadata:
      creationTimestamp: null
      name: cloudflare-api-secret
      namespace: traefik
    spec:
      encryptedData:
        api-token: AgChzpnHiVGONCTOMQM7jHlgQuMEbOO5aNsCrdqtELNwX1Sth05Foz5OrxKvnsCXTUave/Mj2JvTCuHQAYXtc9COuEBSc1myBo4cDuabySqi39gZUCxeRRl5Zr1aI1GgZNJ6CnHDOh23NyRwjYArbUwKI41GKoLo3DcRIYJWUCBqeHeHoCyEVvVkUCatbcBUAX7gyZ5JQqSIQAArJi6JCSZHxf09jn1QdIxEBr04sjeI1GbXgKhZBzu5BZHRlQkxCr+sYiF6wOO0gKG8fdBOurYaSJ0DfBNVadd/z3+s4NW/E5LI9N9EvNvDfG7/+UZI/DkcV1g2Q+hyWupe2UUam4AMaEcFNoI1uweOqZYMwOclMvGWw15bztgmCCpnsOEjseSCA3sGP6K3oMy8VWt/L3FDr/rfLOsSlPdavUBnJAly3Q+XPLY7o4k5anpQW/jZUMSh9xltnWfW5FzCOVXBhryHa4uN/MuZLIquOJB8DtBA/22lIEEeKPHi1rKI0sFp1Jr8xcvGmut15PEx7eCVLHknECSu1K4596MDNENegtbb8Wz3lSU4KemYmbw4EY0WVZw4pNvQf9Br4FjQwoaUR7p3QiqaSmZo+6WK7sTrCdwTvBe5iltcN5qu7vQcAQ0w26LAG7EqjoDDYKkTBpvUrsVcpVclThZrx21CftEHT15daU3kcGmLFdicxoJV3DiSlICgV0pY9jJrCHy5XVpupU6OAerzXcDWAuhj4dLRVVF+ZSq7AgyvJt8O
      template:
        metadata:
          creationTimestamp: null
          name: cloudflare-api-secret
          namespace: traefik
  - apiVersion: bitnami.com/v1alpha1
    kind: SealedSecret
    metadata:
      creationTimestamp: null
      name: dashboard-auth-sealed-secret
      namespace: traefik
    spec:
      encryptedData:
        password: AgA0zGNKTxyUxWyRqpqY6kaEi52+UTuH4rEt2tDXVS1kEzYze8xZeamwPjPTsSOPJZ6pYFQqmdiZP9HpCfpQmbdT7kN2SlX5A0ZCbBC43UvkCI9+gABzm6TLSaru+DZarD8Iers/SkcqtEtpE5vrpoLcfBX0OrTD74ZpyV6lRsBSz55ib1zKe7TcCU/afDQik538Kr9Kr45SvIqELZ3gZsKxviupwnth+JMeqce8IjeICh0dp1iQWxSBH5SpOwDPSsjkdq+rmXvxn2/oyhfoLsbeZh/iB+Two4tyL6LnL31szrysUQkGqMQoCdorxFyeT4p2vzQZUwaGooFnpJY0MgJG/0F3mirvoAYguZAy+mubq0EP4LZDYCG+Aj2H5pY4JivUq+SXxR8smDbgaXATcfk/pr19/oM0Ped8wR4Zi9OWIMCpWWWb8KygvC2rJeh23BSjlqIK4fmpQG8ZFn5cfTfP0FlcL04jds/lO1HuVKkCC40HQslwC3Apy75AYVyhuEYp3nQDR1Hq3xPSlonii5cMd5Wd80B2GJ2zbja6poiggGXtpiAZydLPQ6lIOLHxi56Bv/ITn2kdbUI1dR0I93YY9pFNOSHL2H+W8PX/48MLi6Oh27K4bE6TN0vMDbS9ia3II5WunDhpHaRF0HnEOkN256wqNWPu+hHzSQnOmgXEiQlX+E2hb5+PSy0DOf4iBqMYGsxs5DUcdIrr3rooRHa8KvXuTSpwbZ7w/wTYLFadUw==
        username: AgB+hibitFDoFXM8xuTJJ9RCbCzTZPG//ZViVDkuxsKvwqeyt+1+qF9Dv2UOGju/fhGtoxOzf2lHEgZTu0KLvzEdYJNyNm7S09e7ZH+MZLT93wkPkFigiL/X1CdPT8MW+h4JDtOts3ylWS0SwCFTKNHGk4c8ZdphzkrYh1cPQOSsh8YfQN9qCKcWwCD3VDVLPnc56VOgPgqCYtulcmwjSpdQaeCEPWnblRL1C0MRZJTWmhlPmVc5fiMMyhUanJZDnWowldtd8N0HYpNdpDa5Tm3FWr3TCcQyakEEFbHUkE59ooaXx6VBvCQNBsDFdVgYITO1qCGhISIJfBjKJ2I51+g5qisuPvE0FloaogG9QbNvwlasHwkJFQjUbX1CM9f/WtggnoG1w9D0R8G89rMvxXK8fGhczzoiFQavWja/QELozgXBOZGq2DJMBjcWZ2ETtnr1gZmNHT0Iz9JaPsVo906mjvijQwFi8ZbANpiNoGn+0F4eALu/FT7Bs/ygabWz+wVNiP9v1+lx0tmew+lVoSnCTJ6QojLZVjSjsBSULzIfavXI+Y4dmmQ+KN5kokh7/U82eZs0qVeSjFbe+ofxDvKLNYHxUMF5pEzTLlO52lTFd7rmQuItdvOHG6JsHbDas9WHnaVSMmN/J1VJPeWERnTIgN41U711KiJa4ye1aLAWYRb6xAP212/V7iT54DhMBHsCPUwUZg==
      template:
        metadata:
          creationTimestamp: null
          name: dashboard-auth-secret
          namespace: traefik
  - apiVersion: traefik.io/v1alpha1
    kind: Middleware
    metadata:
      name: dashboard-auth
    spec:
      basicAuth:
        secret: dashboard-auth-secret

logs:
  general:
    level: TRACE

  access:
    enabled: true

certificatesResolvers:
  letsencrypt:
    acme:
      email: "daniel.da-silva@gmx.de"
      storage: "/data/acme.json"
      dnschallenge:
        provider: "cloudflare"

env:
  - name: CF_DNS_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: cloudflare-api-secret
        key: api-token

persistence:
  enabled: true
