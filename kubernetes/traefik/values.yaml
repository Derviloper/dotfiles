ports:
  web:
    port: 80
    nodePort: 30000

    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true

  websecure:
    port: 443
    nodePort: 30001

api:
  dashboard: true
  insecure: false

ingressRoute:
  dashboard:
    enabled: true
    matchRule: Host(`traefik.derviloper.de`)
    entryPoints:
      - websecure
    middlewares:
      - name: dashboard-auth

extraObjects:
  - apiVersion: v1
    kind: Secret
    metadata:
      name: dashboard-auth-secret
    type: kubernetes.io/basic-auth
    stringData:
      username: admin
      password: "P@ssw0rd"
  - apiVersion: traefik.io/v1alpha1
    kind: Middleware
    metadata:
      name: dashboard-auth
    spec:
      basicAuth:
        secret: dashboard-auth-secret

ingressClass:
  enabled: false

providers:
  kubernetesIngress:
    enabled: false
  kubernetesGateway:
    enabled: true

gateway:
  listeners:
    web:
      port: 80
      protocol: HTTP
      namespacePolicy: All

    websecure:
      port: 443
      protocol: HTTPS
      namespacePolicy: All
      mode: Terminate

logs:
  general:
    level: INFO

  access:
    enabled: true

metrics:
  prometheus:
    enabled: true

certificatesresolvers:
  le:
    acme:
      email: "daniel.da-silva@gmx.de"
      storage: "/data/acme.json"
      dnschallenge:
        provider: "cloudflare"

env:
  - name: CF_DNS_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: cloudflare-api-secret
        key: api-token

persistence:
  enabled: true
  name: data
  size: 1Gi
  storageClass: ""
